---
title: 20201213の調べ
date: 2020-12-13 11:30:35
tags:
---

## Docker on M1関連
- [Apple Silicon M1 Chips and Docker \- Docker Blog](https://www.docker.com/blog/apple-silicon-m1-chips-and-docker/?utm_campaign=IT+Pro&utm_content=1605547520&utm_medium=social&utm_source=Organic)を見ると

    - Docker Desktop for Mac　がMacでのDocker 実行環境
        - 裏で、VMを動かし、その上でLinuxを動かしている
        - VMを動かすために、Appleのhypervisor frameworkを使用しており、その対応　がないとM1で動かせない
        - それ以外にも、細かいところで、goやElectronの対応などもある

    - [Hypervisor \| Apple Developer Documentation](https://developer.apple.com/documentation/hypervisor)
        - このM1対応が必要？
        - Intel Macの場合は、Intelの hardware-assistedなvirtualizationに依存しているはず。M1はどうなってるんだろう・・・
            - ARMの仮想化とは？

        - そもそも仮想化には`ホスト型`と`Hypervisor型`の方式がある
            - [ARMへの移行で変わるMacの「仮想化」 \- 新・OS X ハッキング\!\(269\) \| マイナビニュース](https://news.mynavi.jp/article/osxhack-269/)
            - ホスト型では、HWアクセスが、必ずホストOSを通過するので、オーバーヘッド大きい
            - 一方、Hypervisor型では、直接HWを制御ができる。これには、HWのアシストが必要で、Intelの場合はVT-X, EPTで、それに対するFWとして、MacではHypervisor.frameworkが存在する
                - つまり、x86-64に依存しているということ

        - [Docker Desktop 3\.0\.0: Smaller, Faster Releases \- Docker Blog](https://www.docker.com/blog/docker-desktop-3-0-0-smaller-faster-releases/)
            - Previewでは対応版が公開されているとのこと、早い